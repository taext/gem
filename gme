#!/home/dd/anaconda3/bin/python  
########################################################
#                                                      #
#               gme v1.4 (July 22nd 2017)              #
#                                                      #
#                GnuPG encryption module               #
#                                                      #
#  What's New: code clean-up (this header)  ############

import gnupg
import sys
import os


def gpg_me(clear_text, pubkey_filename='pubkey.asc', err=False):

    """Takes pubkey filename and clear text string,
    returns GPG encrypted string."""

    gpg = gnupg.GPG()
    os.chdir('/home/dd/Documents/pubkeys')
    key_data = open(pubkey_filename).read()

    import_result = gpg.import_keys(key_data)
    fingerprint = import_result.results[0]['fingerprint']

    encr_data = gpg.encrypt(clear_text, fingerprint)
    result = str(encr_data)

    if err: return result, encr_data.stderr
    else: return result

if __name__ == '__main__':

    args = []
    [args.append(item) for item in sys.argv[1:]]
    print(gpg_me(*args))
    